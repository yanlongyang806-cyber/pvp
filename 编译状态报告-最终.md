# ç¼–è¯‘çŠ¶æ€æŠ¥å‘Š - æœ€ç»ˆç»“è®º

## ğŸ“Š ç¼–è¯‘å°è¯•æ€»ç»“

### âœ… å·²å®Œæˆ
1. âœ… ä¿®å¤äº†å‡½æ•°é‡å®šä¹‰é”™è¯¯ï¼ˆ`log2`, `round`ï¼‰
2. âœ… ä¿®æ”¹äº†æºç æ·»åŠ å…¨åœ°å›¾PVPåŠŸèƒ½
3. âœ… æˆåŠŸç¼–è¯‘äº†å¤§éƒ¨åˆ†ä¾èµ–åº“

### âŒ æ— æ³•å®Œæˆçš„åŸå› 

**ç¼ºå°‘å…³é”®çš„ä»£ç ç”Ÿæˆæ–‡ä»¶ï¼š**
```
AutoGen/GameClientLib_autogen_ClientCmdWrappers.h  - ç¼ºå¤±
AutoGen/AppServerLib_autogen_remotefuncs.h         - ç¼ºå¤±
AutoGen/SoundLib_autogen_ClientCmdWrappers.h       - ç¼ºå¤±
```

**ç¼ºå°‘ä»£ç ç”Ÿæˆå·¥å…·ï¼š**
```
I:\Night\Night\utilities\bin\structparser.exe      - ä¸å­˜åœ¨
```

è¿™äº›æ–‡ä»¶æ˜¯åœ¨é¢„ç¼–è¯‘æ­¥éª¤ç”± `structparser.exe` è‡ªåŠ¨ç”Ÿæˆçš„ã€‚

---

## ğŸ¯ å®é™…å¯è¡Œçš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶å¯ç”¨PVPï¼ˆæ¨èï¼‰âœ…

**åŸç†**ï¼šåœ¨ç°æœ‰çš„GameServer.exeä¸Šé€šè¿‡é…ç½®å’Œå¯åŠ¨å‚æ•°å¯ç”¨PVP

**æ­¥éª¤**ï¼š

1. **ä½¿ç”¨ç°æœ‰çš„GameServer.exe**
   ```
   I:\Night\Night\tools\bin\GameServer.exe (40.3 MB)
   ```

2. **ä½¿ç”¨PVPå¯åŠ¨è„šæœ¬**
   ```batch
   cd I:\Night\Night\tools\bin
   å¯åŠ¨å…¨åœ°å›¾PVPæœåŠ¡å™¨.bat
   ```

3. **è„šæœ¬ä¼šè‡ªåŠ¨**ï¼š
   - åŠ è½½PVPé…ç½®æ–‡ä»¶
   - ä½¿ç”¨PVPå¯åŠ¨å‚æ•°
   - å°è¯•æ¿€æ´»å…¨åœ°å›¾PVPæ¨¡å¼

**æ–‡ä»¶ä½ç½®**ï¼š
- `I:\Night\Night\tools\bin\å¯åŠ¨å…¨åœ°å›¾PVPæœåŠ¡å™¨.bat`
- `I:\Night\Night\tools\bin\å¯ç”¨å…¨åœ°å›¾PVP.cfg`

---

### æ–¹æ¡ˆ2ï¼šè·å–å®Œæ•´å¼€å‘ç¯å¢ƒ

**éœ€è¦çš„é¢å¤–æ–‡ä»¶**ï¼š
1. `structparser.exe` - ä»£ç ç”Ÿæˆå·¥å…·
2. å®Œæ•´çš„AutoGenç”Ÿæˆæ–‡ä»¶
3. æˆ–å®Œæ•´çš„æ„å»ºè„šæœ¬

**å¦‚æœä½ æœ‰è¿™äº›æ–‡ä»¶çš„å¤‡ä»½æˆ–å¯ä»¥ä»å…¶ä»–åœ°æ–¹è·å–ï¼Œç¼–è¯‘å°±èƒ½æˆåŠŸã€‚**

---

## ğŸ“ ç¼–è¯‘æ—¥å¿—åˆ†æ

### ç¼–è¯‘è¿›åº¦

```
âœ… UtilitiesLib     - ç¼–è¯‘æˆåŠŸ
âœ… ServerLib        - ç¼–è¯‘æˆåŠŸ  
âœ… WorldLib         - ç¼–è¯‘æˆåŠŸ
âœ… AILib            - ç¼–è¯‘æˆåŠŸ
âŒ GameServerLib    - å¤±è´¥ï¼ˆç¼ºå°‘AutoGenæ–‡ä»¶ï¼‰
âŒ NNOGameServer    - å¤±è´¥ï¼ˆä¾èµ–GameServerLibï¼‰
```

### é”™è¯¯åŸå› 

æ‰€æœ‰é”™è¯¯éƒ½æ˜¯å› ä¸ºç¼ºå°‘è¿™ä¸ªæ–‡ä»¶ï¼š
```
AutoGen/GameClientLib_autogen_ClientCmdWrappers.h
```

è¿™ä¸ªæ–‡ä»¶åŒ…å«å®¢æˆ·ç«¯å‘½ä»¤åŒ…è£…å™¨ï¼Œæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚

---

## ğŸ” ä¸ºä»€ä¹ˆQLWDé¡¹ç›®å¯ä»¥ç¼–è¯‘Demoï¼Ÿ

`I:\QLWD\GameServer\` ç›®å½•ä¸‹çš„é¡¹ç›®å¯ä»¥ç¼–è¯‘Demoæ˜¯å› ä¸ºï¼š

1. **Demoæ˜¯ç‹¬ç«‹çš„** - ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨åº“
2. **è‡ªåŒ…å«** - æ‰€æœ‰ä»£ç åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­
3. **æ— éœ€AutoGen** - æ²¡æœ‰è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç 

**ä½†å®Œæ•´çš„GameServeréœ€è¦**ï¼š
- 9ä¸ªä¾èµ–åº“
- AutoGenç”Ÿæˆçš„ä»£ç 
- å®Œæ•´çš„å·¥å…·é“¾

---

## ğŸ’¡ æœ€ç»ˆå»ºè®®

### ç«‹å³å¯ç”¨çš„æ–¹æ¡ˆ

**ä½¿ç”¨é…ç½®æ–‡ä»¶æ–¹å¼**ï¼š

```batch
# 1. è¿›å…¥binç›®å½•
cd I:\Night\Night\tools\bin

# 2. è¿è¡ŒPVPå¯åŠ¨è„šæœ¬
å¯åŠ¨å…¨åœ°å›¾PVPæœåŠ¡å™¨.bat
```

**è¿™ä¸ªè„šæœ¬ä¼š**ï¼š
1. æ£€æŸ¥ç¯å¢ƒ
2. åŠ è½½PVPé…ç½®
3. ä½¿ç”¨ä»¥ä¸‹å‚æ•°å¯åŠ¨ï¼š
   ```
   GameServer.exe -pvp 1 -fullmap_pvp 1 +exec å¯ç”¨å…¨åœ°å›¾PVP.cfg
   ```

---

### å¦‚æœæƒ³é‡æ–°ç¼–è¯‘

**éœ€è¦å‡†å¤‡**ï¼š

1. **æ‰¾åˆ°structparser.exe**
   - æˆ–é‡æ–°ç”ŸæˆAutoGenæ–‡ä»¶
   - æˆ–ä»å®Œæ•´çš„å¼€å‘ç¯å¢ƒå¤åˆ¶

2. **è¿è¡Œé¢„ç¼–è¯‘æ­¥éª¤**
   ```batch
   structparser.exe [å‚æ•°]
   ```

3. **ç„¶åæ‰èƒ½ç¼–è¯‘**
   ```batch
   msbuild NNOGameServer.sln
   ```

---

## ğŸ“¦ å½“å‰å¯ç”¨çš„æ–‡ä»¶

### å·²ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶

1. **GameServer.exe** (40.3 MB)
   - ä½ç½®ï¼š`I:\Night\Night\tools\bin\`
   - çŠ¶æ€ï¼šå®Œæ•´ï¼Œå¯è¿è¡Œ
   - PVPï¼šéœ€è¦é…ç½®æ¿€æ´»

2. **GameServer_PVP_Demo.exe** (107 KB)
   - ä½ç½®ï¼š`I:\QLWD\bin\`
   - çŠ¶æ€ï¼šæ¼”ç¤ºç‰ˆ
   - PVPï¼šå·²å†…ç½®

### é…ç½®å’Œè„šæœ¬

- âœ… `å¯åŠ¨å…¨åœ°å›¾PVPæœåŠ¡å™¨.bat`
- âœ… `å¯ç”¨å…¨åœ°å›¾PVP.cfg`
- âœ… `å¿«é€Ÿå¯åŠ¨GameServer.bat`

---

## ğŸ® æµ‹è¯•PVPåŠŸèƒ½

### ä½¿ç”¨é…ç½®æ–‡ä»¶æ–¹å¼

```batch
cd I:\Night\Night\tools\bin
å¯åŠ¨å…¨åœ°å›¾PVPæœåŠ¡å™¨.bat
```

**è§‚å¯Ÿè¾“å‡º**ï¼š
- æœåŠ¡å™¨æ˜¯å¦æ¥å—PVPå‚æ•°
- æ˜¯å¦åŠ è½½PVPé…ç½®
- æ˜¯å¦æ˜¾ç¤ºPVPç›¸å…³ä¿¡æ¯

### è¿æ¥å®¢æˆ·ç«¯æµ‹è¯•

1. å¯åŠ¨GameServer
2. è¿æ¥å®¢æˆ·ç«¯
3. å°è¯•PVPå¯¹æˆ˜
4. æ£€æŸ¥æ˜¯å¦å¯ä»¥åœ¨ä»»æ„åœ°å›¾PK

---

## ğŸ”§ ä¿®å¤è¿‡çš„é—®é¢˜

åœ¨ç¼–è¯‘å°è¯•ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†ï¼š

1. âœ… **å‡½æ•°é‡å®šä¹‰é”™è¯¯**
   ```c
   // stdtypes.h
   log2  -> ilog2 (å·²ä¿®å¤)
   
   // mathutil.h  
   round -> iround (å·²ä¿®å¤)
   ```

2. âœ… **ä¾èµ–åº“é¡¹ç›®æ–‡ä»¶**
   - æ£€æŸ¥ç¡®è®¤æ‰€æœ‰.vcxprojæ–‡ä»¶å®Œæ•´

3. âœ… **ç¼–è¯‘é…ç½®**
   - ä½¿ç”¨å¤šæ ¸ç¼–è¯‘ (/m:4)
   - æ­£ç¡®çš„å¹³å°å’Œé…ç½®

---

## ğŸ“Š ç»“è®º

### ç¼–è¯‘ç»“æœ

âŒ **æ— æ³•ç¼–è¯‘æ–°çš„GameServer.exe**

**åŸå› **ï¼šç¼ºå°‘AutoGenä»£ç ç”Ÿæˆå·¥å…·å’Œæ–‡ä»¶

### å¯ç”¨æ–¹æ¡ˆ

âœ… **ä½¿ç”¨ç°æœ‰exe + é…ç½®æ–‡ä»¶å¯ç”¨PVP**

**æˆåŠŸç‡**ï¼šå–å†³äºGameServeræ˜¯å¦æ”¯æŒè¿™äº›å‚æ•°

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### æ¨èæ­¥éª¤

1. **ç«‹å³æµ‹è¯•**ï¼š
   ```batch
   cd I:\Night\Night\tools\bin
   å¯åŠ¨å…¨åœ°å›¾PVPæœåŠ¡å™¨.bat
   ```

2. **è§‚å¯Ÿæ—¥å¿—**ï¼š
   - æŸ¥çœ‹æœåŠ¡å™¨å¯åŠ¨ä¿¡æ¯
   - ç¡®è®¤æ˜¯å¦åŠ è½½PVPé…ç½®

3. **å®¢æˆ·ç«¯æµ‹è¯•**ï¼š
   - è¿æ¥æœåŠ¡å™¨
   - æµ‹è¯•PVPåŠŸèƒ½

4. **åé¦ˆç»“æœ**ï¼š
   - å¦‚æœPVPå‚æ•°æœ‰æ•ˆ â†’ æˆåŠŸï¼
   - å¦‚æœæ— æ•ˆ â†’ éœ€è¦å¯»æ‰¾structparser.exeæˆ–å®Œæ•´å·¥å…·é“¾

---

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### ç¼–è¯‘æ—¥å¿—æ‘˜è¦

```
æ­£åœ¨ç¼–è¯‘: UtilitiesLib        âœ…
æ­£åœ¨ç¼–è¯‘: ServerLib           âœ…
æ­£åœ¨ç¼–è¯‘: WorldLib            âœ…
æ­£åœ¨ç¼–è¯‘: GameServerLib       âŒ
é”™è¯¯: æ— æ³•æ‰“å¼€åŒ…æ‹¬æ–‡ä»¶
  AutoGen/GameClientLib_autogen_ClientCmdWrappers.h
```

### ä¿®å¤çš„ä»£ç 

**æ–‡ä»¶**ï¼š`I:\Night\Night\src\libs\UtilitiesLib\stdtypes.h`
```c
// é‡å‘½åé¿å…å†²çª
__forceinline static int ilog2(int val) {
    // ... implementation
}
#define log2 ilog2  // å…¼å®¹æ€§å®
```

**æ–‡ä»¶**ï¼š`I:\Night\Night\src\libs\UtilitiesLib\utils\mathutil.h`
```c
// é‡å‘½åé¿å…å†²çª
__forceinline static int iround(float a) {
    // ... implementation
}
#define round iround  // å…¼å®¹æ€§å®
```

---

**æœ€åæ›´æ–°**ï¼š2025-11-22 12:00  
**çŠ¶æ€**ï¼šç¼–è¯‘å—é˜»ï¼Œæä¾›é…ç½®æ–‡ä»¶æ›¿ä»£æ–¹æ¡ˆ  
**å»ºè®®**ï¼šä½¿ç”¨ç°æœ‰exe + PVPé…ç½®å¯åŠ¨

